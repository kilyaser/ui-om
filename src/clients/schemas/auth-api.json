{"openapi":"3.0.1","info":{"title":"order-manager","description":"API order-manager","contact":{"name":"Илья Календарев","email":"kilyaser@gmail.com"},"version":"1.0.0"},"servers":[{"url":"http://order-manager.ru","description":"dev server"},{"url":"http://62.113.104.3:8081","description":"id address server"},{"url":"http://localhost:8081","description":"localhost server"}],"tags":[{"name":"authentication-api","description":"Контроллер для регистрации пользователей"},{"name":"om-user-api","description":"Конроллер для манипуляции данными пользователя"},{"name":"role-controller-api","description":"Контролер для получения информации о ролях."}],"paths":{"/api/v1/users/password":{"put":{"tags":["om-user-api"],"description":"Изменение пароля.","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordUpdateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/users/change":{"put":{"tags":["om-user-api"],"description":"Обновление данных пользователя","operationId":"changeOmUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOmUserRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OmUser"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["authentication-api"],"description":"Регистрация пользователя.","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OmUser"}}}}}}},"/api/v1/auth/authenticate":{"post":{"tags":["authentication-api"],"description":"Аутентификация пользователя.","operationId":"authenticate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/api/v1/users/{userId}":{"get":{"tags":["om-user-api"],"operationId":"getOmUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OmUser"}}}}}}},"/api/v1/ui/roles":{"get":{"tags":["role-controller-api"],"description":"Получить доступные для назначения роли.","operationId":"getAvailableRoles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RolesResponse"}}}}}}},"/api/v1/auth/refresh-token":{"get":{"tags":["authentication-api"],"description":"Получение нового токена доступа.","operationId":"refreshToken","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}}},"components":{"schemas":{"PasswordUpdateRequest":{"required":["newPassword","oldPassword"],"type":"object","properties":{"oldPassword":{"maxLength":255,"type":"string","description":"Старый пароль пользователя"},"newPassword":{"maxLength":255,"pattern":"^(?=.{7,20}$)[0-9a-zA-Z]*$","type":"string","description":"Новый пароль пользователя"}}},"OmUserFieldPatch":{"type":"object","properties":{"firstName":{"maxLength":255,"type":"string","description":"Имя пользователя"},"lastName":{"maxLength":255,"type":"string","description":"Фамилия пользователя"},"patronymic":{"maxLength":255,"type":"string","description":"Отчество пользователя"},"email":{"maxLength":255,"type":"string","description":"e-mail пользователя"},"phone":{"maxLength":255,"pattern":"^\\d{11}$","type":"string","description":"Контактный телефон пользователя"},"birthday":{"maxLength":19,"type":"string","description":"Дата рождения пользователя","format":"date"}},"description":"Изменяемые поля"},"UpdateOmUserRequest":{"required":["id","patch"],"type":"object","properties":{"id":{"maxLength":36,"type":"string","description":"id пользователя","format":"uuid"},"patch":{"$ref":"#/components/schemas/OmUserFieldPatch"}}},"OmUser":{"required":["email"],"type":"object","properties":{"id":{"maxLength":36,"type":"string","description":"id пользователя","format":"uuid"},"firstName":{"maxLength":255,"type":"string","description":"Имя пользователя"},"lastName":{"maxLength":255,"type":"string","description":"Фамилия пользователя"},"patronymic":{"maxLength":255,"type":"string","description":"Отчество пользователя"},"birthday":{"maxLength":10,"type":"string","description":"Дата рождения пользователя"},"email":{"maxLength":255,"type":"string","description":"email/логин пользователя"},"phone":{"maxLength":255,"type":"string","description":"Телефон пользователя"},"roles":{"uniqueItems":true,"type":"array","items":{"maxLength":500,"type":"string","description":"Список ролей"}}}},"RegisterRequest":{"required":["email","firstName","lastName","password"],"type":"object","properties":{"firstName":{"maxLength":50,"minLength":2,"type":"string","description":"Имя пользователя"},"lastName":{"maxLength":50,"minLength":3,"type":"string","description":"Фамилия пользователя"},"patronymic":{"maxLength":255,"type":"string","description":"Отчество пользователя"},"email":{"maxLength":255,"type":"string","description":"email/логин пользователя"},"phone":{"maxLength":255,"pattern":"^\\+\\d{5,15}$","type":"string","description":"Телефон пользователя"},"password":{"maxLength":255,"pattern":"^(?=.{7,20}$)[0-9a-zA-Z]*$","type":"string","description":"Пароль пользователя"},"birthday":{"maxLength":10,"type":"string","description":"Дата рождения пользователя","format":"date-time"},"roles":{"uniqueItems":true,"type":"array","items":{"maxLength":500,"type":"string","description":"Список ролей","enum":["ADMIN","MANAGER","TECHNOLOGIST","CEO"]}}},"description":"RegisterRequest"},"AuthRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"AuthResponse":{"type":"object","properties":{"userId":{"maxLength":36,"type":"string","description":"Идентификатор пользователя","format":"uuid"},"accessToken":{"maxLength":255,"type":"string","description":"Токен доступа"},"refreshToken":{"maxLength":255,"type":"string","description":"Токен обновления"}}},"RolesResponse":{"type":"object","properties":{"availableRoles":{"maxLength":500,"uniqueItems":true,"type":"array","description":"Роли, доступные для назначения","items":{"maxLength":500,"type":"string","description":"Роли, доступные для назначения"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}